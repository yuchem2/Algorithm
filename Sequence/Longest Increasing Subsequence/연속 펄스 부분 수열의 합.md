tags: `Programmers`, `LIS`
# [Programmers] 연속 펄스 부분 수열의 합 (PYTHON)
Programmers 코딩테스트 연습:

ID: yuchem2@gmail.com

Date: 2024.11.07

소요시간: 1시

## 1. 문제설명

### 문제
---

어떤 수열의 연속 부분 수열에 같은 길이의 펄스 수열을 각 원소끼리 곱하여 연속 펄스 부분 수열을 만들려 합니다. 펄스 수열이란 [1, -1, 1, -1 …] 또는 [-1, 1, -1, 1 …] 과 같이 1 또는 -1로 시작하면서 1과 -1이 번갈아 나오는 수열입니다.
예를 들어 수열 [2, 3, -6, 1, 3, -1, 2, 4]의 연속 부분 수열 [3, -6, 1]에 펄스 수열 [1, -1, 1]을 곱하면 연속 펄스 부분수열은 [3, 6, 1]이 됩니다. 또 다른 예시로 연속 부분 수열 [3, -1, 2, 4]에 펄스 수열 [-1, 1, -1, 1]을 곱하면 연속 펄스 부분수열은 [-3, -1, -2, 4]이 됩니다.
정수 수열 sequence가 매개변수로 주어질 때, 연속 펄스 부분 수열의 합 중 가장 큰 것을 return 하도록 solution 함수를 완성해주세요.

### 제한사항
+ 1 ≤ sequence의 길이 ≤ 500,000
+ -100,000 ≤ sequence의 원소 ≤ 100,000
  + sequence의 원소는 정수입니다.

### 예제입출력
|sequence|	result|
| :--: | :--: |
|[2, 3, -6, 1, 3, -1, 2, 4]	|10|

## 2. 소스코드

### 알고리즘

해당 문제는 펄스 수열이라는 조건이 들어가 있지만, 부분수열을 구하는 문제와 크게 다를 게 없다. 

펄스 수열은 1 혹은 -1로 시작하는 두 종류가 존재하는데 이로 인해 항상 부분 수열이 두 가지 케이스만이 등장할 수 있다.

즉, 원래 수열에 펄스 수열을 곱하더라도 최대 두 가지 케이스만이 존재한다는 것이다. 

이를 기준으로 펄스 수열과 곱해진 두 가지 수열을 구한 다음 각 형태에서 부분 수열의 최댓값을 구하면 된다.

이 문제에서는 음수, 양수가 혼용되어 있음으로, 최댓값은 항상 양수이기 때문에 

수열을 순회하면서 이전까지의 합과 현재 값을 더했을 때 음수이면, 현재 값을 최대값으로 지젖하고, 이전 값이 양수이면, 이전 값과 현재 값을 더함으로써 i개의 원소를 이용해 만들 수 있는 부분 수열의 합 중 최댓값을 구할 수 있다. 
즉, dp[i] 는 0~i번째 원소로 구성된 부분수열 중 최댓값을 의미한다. dp[0] ~ dp[len(sequence)] 중 최대값을 구하면, 답을 구할 수 있다.

### 코드
```python
def solution(sequence):
    purse = [[0] * len(sequence) for _ in range(2)]
    for i in range(len(sequence)):
        purse[0][i] = sequence[i] * (1 if i % 2 == 0 else -1)
        purse[1][i] = purse[0][i] * -1
    
    dp = [[0] * len(sequence) for _ in range(2)]
    dp[0][0], dp[1][0] = purse[0][0], purse[1][0]
    for i in range(1, len(sequence)):
        dp[0][i] = max(0, dp[0][i-1]) + purse[0][i]
        dp[1][i] = max(0, dp[1][i-1]) + purse[1][i]
    
    answer = max(max(dp[0]), max(dp[1]))
    return answer
```
## 3. 개선점
x
## 4. 개선사항
x
## 5. 개선사항 평가
x
