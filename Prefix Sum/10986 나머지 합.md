tags: `BOJ`, `Prefix sum`
# [BOJ] 10986번 나머지 합(PYTHON)
백준온라인저지(BOJ) https://www.acmicpc.net/

ID: yuchem2

Date: 2023.05.17
## 1. 문제설명
| 시간 제한 | 메모리 제한 | 제출  | 정답 | 맞은 사람 | 정답 비율 |
| :---: | :---: | :---: | :---: | :---: | :---: |
|  1초  |  256 MB | 27980 | 8059 | 5870 | 27.248% |

### 문제
---
수 N개 $A_1, A_2, ..., A_N$이 주어진다. 이때, 연속된 부분 구간의 합이 M으로 나누어 떨어지는 구간의 개수를 구하는 프로그램을 작성하시오.

즉, $A_i + ... + A_j (i ≤ j)$ 의 합이 M으로 나누어 떨어지는 $(i, j)$ 쌍의 개수를 구해야 한다.
### 입력
---
첫째 줄에 N과 M이 주어진다. $(1 ≤ N ≤ 10^6, 2 ≤ M ≤ 10^3)$

둘째 줄에 N개의 수 $A_1, A_2, ..., A_N$이 주어진다. $(0 ≤ A_i ≤ 10^9)$
### 출력
---
첫째 줄에 연속된 부분 구간의 합이 M으로 나누어 떨어지는 구간의 개수를 출력한다.


### 예제입력1
```
5 3
1 2 3 1 2
```
### 예제출력1
```
7
```
## 2. 소스코드

### 알고리즘

먼저 처음에는 단순하게 누적합을 이용해, 모든 경우의 수의 합을 모두 계산 한 뒤 나누어 떨어지는지 확인하였다. 이로 인해 O(n^2)이 소요되었고, 문제를 해결할 수 없었다.  
앞서 풀이를 하면서 다음과 같은 식을 얻을 수 있었다. 

$$(S[i] - S[j-1]) \quad mod \quad M = 0$$ 

위 식이 참일 때가 우리가 원하는 구간 (i, j)이다. 이 식을 좀 더 풀어쓰면 다음과 같다. 

$$S[i] \quad mod \quad M = S[j-1] \quad mod \quad M$$

이 식을 토대로 보면, i, j-1의 누적합을 M으로 나눈 나머지가 같은 경우에 우리가 원하는 구간임을 알 수 있다.  
그러므로 새로운 배열 cnt를 만든 후 누적합을 M으로 나눈 나머지의 개수를 counting한다.  
입력이 예제인 경우 배열 cnt는 다음과 같이 만들어진다.  

|   0   |   1   |   2   |
| :---: | :---: | :---: |
|   3   |   2   |   0   |

여기서 i, j-1의 누적합을 M으로 나눈 나머지가 같은 경우를 세야한다. 즉, 나머지가 같은 두 개의 인덱스를 선택하는 것과 같다.  
이를 다시 쓰면 $_nC_2$라고 쓸 수 있다. 즉, 위 경우에서 우리가 구하자는 결과는 다음과 같이 계산될 수 있다. 

$$result = cnt[0] + (cnt[0] \times (cnt[0]-1)/2) + (cnt[1] \times (cnt[1]-1)/2) = 3 + 3 + 1 = 7$$

이를 일반화 하면 다음과 같은 식이 도출된다. 

$$result = cnt[0] + (cnt[0] \times (cnt[0]-1))/2 + (cnt[1] \times (cnt[1]-1))/2 + ... + (cnt[M-1] \times (cnt[M-1]-1))/2$$

### 코드
```Python
num, divisor = map(int, input().split())
sequence = list(map(int, input().split()))
sequence.insert(0, 0)

cnt = [0]*divisor
for i in range(1, num+1):
    sequence[i] = (sequence[i] + sequence[i-1])%divisor
    cnt[sequence[i]] += 1

result = cnt[0]
for i in range(divisor):
    if cnt[i] > 1:
        result += ((cnt[i] * (cnt[i]-1))//2)
print(result)
```

| 결과 | 메모리 | 시간 | 코드길이 |
|:---:|:-----: | :---: | :----: |
| 맞았습니다 | 152764 KB | 660 ms | 352 B |

## 3. 개선점
x
## 4. 개선사항
x
## 5. 개선사항 평가
x
